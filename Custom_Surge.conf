[General]
loglevel = warning

# --- DNS ---
dns-server = system,119.29.29.29,223.5.5.5
hijack-dns = 8.8.8.8:53,8.8.4.4:53,1.1.1.1:53,1.0.0.1:53
always-real-ip = dns.msftncsi.com, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.turn.twilio.com, *.stun.twilio.com, stun.syncthing.net, stun.*, *.logon.battlenet.com.cn, *.logon.battle.net, *.blzstatic.cn, network-test.debian.org, detectportal.firefox.com, resolver1.opendns.com, pool.ntp.org, *.pool.ntp.org, ntp.*.com, time.*.com, time.*.gov, time.*.edu.cn, *.ntp.org.cn

# --- è·³è¿‡ä»£ç† ---
skip-proxy = 127.0.0.0/8, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 162.14.0.0/16, fc00::/7, fe80::/10, localhost, *.local, *.ts.net, captive.apple.com, passenger.t3go.cn, *.ccb.com, wxh.wo.cn, *.abcchina.com, *.abcchina.com.cn
exclude-simple-hostnames = true
read-etc-hosts = true

# --- IPv6 ---
ipv6 = true
ipv6-vif = auto

# --- è¿é€šæ€§æµ‹è¯• ---
internet-test-url = http://wifi.vivo.com.cn/generate_204
proxy-test-url = http://cp.cloudflare.com/generate_204
proxy-test-udp = cp.cloudflare.com@1.1.1.1
test-timeout = 3

# --- ç›‘å¬ä¸å…±äº« ---
http-listen = 0.0.0.0:8888
socks5-listen = 0.0.0.0:8889
wifi-access-http-port = 8888
wifi-access-socks5-port = 8889
allow-wifi-access = true
proxy-restricted-to-lan = true

# --- API ---
external-controller-access = dler@0.0.0.0:6170
http-api = dler@0.0.0.0:6171
http-api-web-dashboard = true

# --- æ‚é¡¹ ---
show-error-page-for-reject = false
block-quic = all-proxy
udp-policy-not-supported-behaviour = DIRECT
udp-priority = true
wifi-assist = false

[Replica]
hide-apple-request = true
hide-crash-reporter-request = true
hide-udp = false
keyword-filter-type = blacklist

[Proxy]

[Proxy Group]
# ä¸»ç­–ç•¥
Proxy = select,ğŸ‡­ğŸ‡° HK,ğŸ‡¼ğŸ‡¸ TW,ğŸ‡¸ğŸ‡¬ SG,ğŸ‡ºğŸ‡² US,ğŸ‡¯ğŸ‡µ JP
# æœåŠ¡
AI = select,Proxy,DIRECT,ğŸ‡­ğŸ‡° HK,ğŸ‡¼ğŸ‡¸ TW,ğŸ‡¸ğŸ‡¬ SG,ğŸ‡ºğŸ‡² US,ğŸ‡¯ğŸ‡µ JP
Media = select,Proxy,DIRECT,ğŸ‡­ğŸ‡° HK,ğŸ‡¼ğŸ‡¸ TW,ğŸ‡¸ğŸ‡¬ SG,ğŸ‡ºğŸ‡² US,ğŸ‡¯ğŸ‡µ JP
TikTok = select,Proxy,DIRECT,ğŸ‡­ğŸ‡° HK,ğŸ‡¼ğŸ‡¸ TW,ğŸ‡¸ğŸ‡¬ SG,ğŸ‡ºğŸ‡² US,ğŸ‡¯ğŸ‡µ JP
Apple = select,Proxy,DIRECT,ğŸ‡­ğŸ‡° HK,ğŸ‡¼ğŸ‡¸ TW,ğŸ‡¸ğŸ‡¬ SG,ğŸ‡ºğŸ‡² US,ğŸ‡¯ğŸ‡µ JP
GitHub = select,Proxy,DIRECT,ğŸ‡­ğŸ‡° HK,ğŸ‡¼ğŸ‡¸ TW,ğŸ‡¸ğŸ‡¬ SG,ğŸ‡ºğŸ‡² US,ğŸ‡¯ğŸ‡µ JP
Telegram = select,Proxy,DIRECT,ğŸ‡­ğŸ‡° HK,ğŸ‡¼ğŸ‡¸ TW,ğŸ‡¸ğŸ‡¬ SG,ğŸ‡ºğŸ‡² US,ğŸ‡¯ğŸ‡µ JP
Tunnel = select,Proxy,DIRECT,ğŸ‡­ğŸ‡° HK,ğŸ‡¼ğŸ‡¸ TW,ğŸ‡¸ğŸ‡¬ SG,ğŸ‡ºğŸ‡² US,ğŸ‡¯ğŸ‡µ JP
SMM = select,Proxy,DIRECT,ğŸ‡­ğŸ‡° HK,ğŸ‡¼ğŸ‡¸ TW,ğŸ‡¸ğŸ‡¬ SG,ğŸ‡ºğŸ‡² US,ğŸ‡¯ğŸ‡µ JP

# é‡‘è
Crypto = select,Proxy,DIRECT,ğŸ‡­ğŸ‡° HK,ğŸ‡¼ğŸ‡¸ TW,ğŸ‡¸ğŸ‡¬ SG,ğŸ‡ºğŸ‡² US,ğŸ‡¯ğŸ‡µ JP
PayPal = select,Proxy,DIRECT,ğŸ‡­ğŸ‡° HK,ğŸ‡¼ğŸ‡¸ TW,ğŸ‡¸ğŸ‡¬ SG,ğŸ‡ºğŸ‡² US,ğŸ‡¯ğŸ‡µ JP
Stripe = select,Proxy,DIRECT,ğŸ‡­ğŸ‡° HK,ğŸ‡¼ğŸ‡¸ TW,ğŸ‡¸ğŸ‡¬ SG,ğŸ‡ºğŸ‡² US,ğŸ‡¯ğŸ‡µ JP

# å·¥å…·
Speed = select,DIRECT,Proxy

# åœ°åŒºèŠ‚ç‚¹
ğŸ‡­ğŸ‡° HK = smart, include-all-proxies=1, policy-regex-filter=(?!.*(Game))(æ¸¯|Hong|HK), interval=600, timeout=2, evaluate-before-use=true
ğŸ‡ºğŸ‡² US = smart, include-all-proxies=1, policy-regex-filter=(?!.*(Game))(ç¾|States|US), interval=600, timeout=2, evaluate-before-use=true
ğŸ‡¼ğŸ‡¸ TW = smart, include-all-proxies=1, policy-regex-filter=(?!.*(Game))(å°|Tai|TW), interval=600, timeout=2, evaluate-before-use=true
ğŸ‡¸ğŸ‡¬ SG = smart, include-all-proxies=1, policy-regex-filter=(?!.*(Game))(æ–°|Singapore|SG), interval=600, timeout=2, evaluate-before-use=true
ğŸ‡¯ğŸ‡µ JP = smart, include-all-proxies=1, policy-regex-filter=(?!.*(Game))(æ—¥|Japan|JP), interval=600, timeout=2, evaluate-before-use=true

[Rule]
# ====== 1. è‡ªå®šä¹‰è§„åˆ™ ======
RULE-SET,https://raw.githubusercontent.com/conversun/SurgeRule/main/reject.list,REJECT,extended-matching,pre-matching
RULE-SET,https://raw.githubusercontent.com/conversun/SurgeRule/main/direct.list,DIRECT,extended-matching
RULE-SET,https://raw.githubusercontent.com/conversun/SurgeRule/main/proxy.list,Proxy,extended-matching
RULE-SET,https://raw.githubusercontent.com/conversun/SurgeRule/main/ssh.list,Tunnel,extended-matching
RULE-SET,https://raw.githubusercontent.com/conversun/SurgeRule/main/smm.list,SMM,extended-matching

# ====== 2. å¹¿å‘Šæ‹¦æˆª ======
RULE-SET,https://ruleset.skk.moe/List/non_ip/sogouinput.conf,REJECT-DROP
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject.conf,REJECT
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject.conf,REJECT,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-no-drop.conf,REJECT-NO-DROP,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-drop.conf,REJECT-DROP,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/TG-Twilight/AWAvenue-Ads-Rule@main/Filters/AWAvenue-Ads-Rule-Surge-RULE-SET.list,REJECT,extended-matching

# ====== 3. å›½å†…ç›´è¿ ======
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_cdn.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/non_ip/microsoft_cdn.conf,DIRECT
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_cn.conf,DIRECT,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/ChinaMedia/ChinaMedia.list,DIRECT,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/SteamCN/SteamCN.list,DIRECT,extended-matching

# ====== 4. AI ======
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Claude/Claude.list,AI,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/OpenAI/OpenAI.list,AI,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/ai.conf,AI,extended-matching

# ====== 5. æµåª’ä½“ ======
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Netflix/Netflix.list,Media,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/TikTok/TikTok.list,TikTok,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/YouTube/YouTube.list,Media,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/GlobalMedia/GlobalMedia.list,Media,extended-matching

# ====== 6. æœåŠ¡ ======
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/AppleProxy/AppleProxy.list,Apple,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/GitHub/GitHub.list,GitHub,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Telegram/Telegram.list,Telegram,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Mail/Mail.list,Tunnel,extended-matching

# ====== 7. é‡‘è ======
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Crypto/Crypto.list,Crypto,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/PayPal/PayPal.list,PayPal,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Stripe/Stripe.list,Stripe,extended-matching

# ====== 8. å·¥å…· ======
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Speedtest/Speedtest.list,Speed,extended-matching

# ====== 9. CDN & ä¸‹è½½ ======
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/cdn.conf,Proxy,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/cdn.conf,Proxy,extended-matching
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/download.conf,Proxy,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/download.conf,Proxy,extended-matching

# ====== 10. å›½å†…åŸŸå ======
RULE-SET,https://ruleset.skk.moe/List/non_ip/neteasemusic.conf,DIRECT,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/domestic.conf,DIRECT,extended-matching

# ====== 11. IP è§„åˆ™ ======
RULE-SET,https://ruleset.skk.moe/List/ip/telegram.conf,Telegram
RULE-SET,https://ruleset.skk.moe/List/ip/telegram_asn.conf,Telegram
PROCESS-NAME,Telegram,REJECT-DROP
RULE-SET,https://ruleset.skk.moe/List/ip/reject.conf,REJECT-DROP

# ====== 12. å…œåº• ======
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/Proxy/Proxy.list,Proxy,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/China/China.list,DIRECT,extended-matching
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Surge/ChinaASN/ChinaASN.list,DIRECT,extended-matching
RULE-SET,LAN,DIRECT
GEOIP,CN,DIRECT,no-resolve
FINAL,Proxy,dns-failed

[Host]
# --- å…¬å¸åˆ†æµ DNS ---
RULE-SET:https://ruleset.skk.moe/Modules/Rules/sukka_local_dns_mapping/alibaba.conf = server:223.5.5.5
RULE-SET:https://ruleset.skk.moe/Modules/Rules/sukka_local_dns_mapping/tencent.conf = server:119.29.29.29
RULE-SET:https://ruleset.skk.moe/Modules/Rules/sukka_local_dns_mapping/bilibili.conf = server:119.29.29.29
RULE-SET:https://ruleset.skk.moe/Modules/Rules/sukka_local_dns_mapping/xiaomi.conf = server:119.29.29.29
RULE-SET:https://ruleset.skk.moe/Modules/Rules/sukka_local_dns_mapping/bytedance.conf = server:180.184.2.2
RULE-SET:https://ruleset.skk.moe/Modules/Rules/sukka_local_dns_mapping/baidu.conf = server:180.76.76.76
RULE-SET:https://ruleset.skk.moe/Modules/Rules/sukka_local_dns_mapping/qihoo360.conf = server:101.198.198.198
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
jd.com = server:119.29.29.29
*.jd.com = server:119.29.29.29

# --- çƒ­ç‚¹ç™»å½• â†’ ç³»ç»Ÿ DNS ---
RULE-SET:https://ruleset.skk.moe/Modules/Rules/sukka_local_dns_mapping/hotspot_captive_portal.conf = server:system

# --- å±€åŸŸç½‘ â†’ ç³»ç»Ÿ DNS ---
RULE-SET:https://ruleset.skk.moe/Modules/Rules/sukka_local_dns_mapping/lan_with_realip.conf = server:system
RULE-SET:https://ruleset.skk.moe/Modules/Rules/sukka_local_dns_mapping/lan_without_real_ip.conf = server:system
*.m2m = server:system
injections.adguard.org = server:system
local.adguard.org = server:system
*.bogon = server:system
*.local = server:system
*.lan = server:system
*.arpa = server:system

[URL Rewrite]

[Script]

[MITM]
skip-server-cert-verify = true
h2 = true

hostname-disabled = gateway.icloud.com,gateway.icloud.com.cn,weather-data.apple.com,buy.itunes.apple.com

ca-passphrase = Dler
ca-p12 = MIIDGgIBAzCCAuAGCSqGSIb3DQEHAaCCAtEEggLNMIICyTCCAb8GCSqGSIb3DQEHBqCCAbAwggGsAgEAMIIBpQYJKoZIhvcNAQcBMBwGCiqGSIb3DQEMAQYwDgQI5e4W8st2yMMCAggAgIIBeBDhcB5oCpEtPyamF2QSSZMoKnIQ9idB7/spS4BgYMq/zDT8c7SDSKM746+4D98feqkJmAYFUWlXtXOHwSR8QlFad9dTYw4SulHDpDAVr/+da6iCX+LeQuducormCI6xVcmpfZ8qvHWzpfHy5mrKxkuyj5OHlehvYOedDZ9P9s9ME2qZFsffKC4kk398QPjoBMLCb73m7QcFdzdus7NuVAd/kYZRww7ODcXcb5a45Yv4NeRwRjnVT8eCgjGXjJXQgJPAtyAWPLW+o1uS132Qdkmg+8EjwuxL/lOu3rLKh0gWWUFHcxv2rg4OcezyoZuv70zs3A8Ju3wmQ6oZuakeRuRyKu6+9BtgOqxnoBwvTMCI4saY8E318DWZjBOzg9N2vPOhKDeoh8ES9TAbRlcp5Bnp5TWrPhae+XeHlHde5KCr3kjB15/DAhrlh7+ht18I/p1shnRKAd1tH6p62to51j9mSHNxOFFCbBPiFqBSnPmuV2SSOOYHcjUwggECBgkqhkiG9w0BBwGggfQEgfEwge4wgesGCyqGSIb3DQEMCgECoIG0MIGxMBwGCiqGSIb3DQEMAQMwDgQI/FfHqSBxFUoCAggABIGQIJa8eopsdqunR4ZwxWt/ThhdkRw2LFHTbgg5jWdAUQfK2b+I6+Wk9Dimdb2xGzAaYcAVt3ArbfuDTjDUTI4m3pzXBe/edyeXagr6i6DgM9TluB4OsG6hC/MFtF3rvqnCT3DGf5b48hSj0Y5OfJy+iFXmasxtwVIf4pFFylXOOJeJdQry1NgImb0nZwsS8NJAMSUwIwYJKoZIhvcNAQkVMRYEFHijHPCciGG5pbv+qBYZvjpHBIFnMDEwITAJBgUrDgMCGgUABBSxzZGBSpKB8R5FQ6wdiWxFka+xcgQIxB+kS2hfUpkCAggA
